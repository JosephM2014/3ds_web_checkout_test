<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Encrypted checkout sample</title>
    <script type="text/javascript" src="js/crypto-js/crypto-js.js"></script>
</head>
<body>
<script>
    let customerPaymentData = {};
    let aesKey = '0000000000000000';
    let encryptedCustomerPaymentData = encryptCustomerPaymentData();


    function encryptCustomerPaymentData() {
        let aesOptions = {
            iv: '0000000000000000',
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        };
        // Encrypt
        return CryptoJS.AES.encrypt(JSON.stringify(customerPaymentData), aesKey, aesOptions).toString();
    }

    function decryptCustomerPaymentData() {
        let aesOptions = {
            iv: '0000000000000000',
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        };
        let ciphertext = encryptCustomerPaymentData();
        // Decrypt
        const bytes = CryptoJS.AES.decrypt(ciphertext, aesKey, aesOptions);
        let result = bytes.toString(CryptoJS.enc.Utf8);
        console.log(result);
        return result;
    }

    const payload = {
        encPayload: encryptedCustomerPaymentData,
        signature: "signature of encPayload",
        key: aesKey,
    };

    function pay() {
        console.log("Payload: ", payload);
    }
</script>
<button onclick="pay()">Pay</button>
<button onclick="decryptCustomerPaymentData()">Decrypt</button>
</body>
</html>